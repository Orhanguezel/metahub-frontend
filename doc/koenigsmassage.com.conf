AnladÄ±m Orhan. Hedefimiz ÅŸu:

* Ana domain: `https://koenigsmassage.com` â†’ **Next.js frontend (port 3001)**
* API: `https://api.guezelwebdesign.com` â†’ **metahub backend (port 5019)**
* Webhook ÅŸimdilik devre dÄ±ÅŸÄ± kalabilir.

Åu anki yapÄ± doÄŸru temellere sahip ama frontend iÃ§in adres deÄŸiÅŸtiÄŸi iÃ§in bazÄ± dÃ¼zenlemeler gerekiyor. AÅŸaÄŸÄ±da gÃ¼ncellenmiÅŸ **Nginx yapÄ±landÄ±rma dosyasÄ±nÄ±** veriyorum. Webhook'u yorum satÄ±rÄ±na aldÄ±m.

---

### âœ… `/etc/nginx/sites-available/koenigsmassage.com`

```nginx
server {
    listen 80;
    server_name koenigsmassage.com www.koenigsmassage.com;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        return 301 https://$host$request_uri;
    }
}

server {
    listen 443 ssl http2;
    server_name koenigsmassage.com www.koenigsmassage.com;

    ssl_certificate /etc/letsencrypt/live/koenigsmassage.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/koenigsmassage.com/privkey.pem;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # ğŸŒ FRONTEND - Next.js SSR (PM2 ile 3001 portunda)
    location / {
        proxy_pass http://127.0.0.1:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Real-IP $remote_addr;
    }

    # ğŸ”§ BACKEND - metahub api.guezelwebdesign.com (ayrÄ± subdomain, yÃ¶nlendirme burada yapÄ±lmaz)
    # Bu domain bu server block altÄ±nda deÄŸil. API ayrÄ± domainde Ã§alÄ±ÅŸÄ±yor: https://api.guezelwebdesign.com

    # ğŸš« WEBHOOK (ÅŸimdilik kapalÄ±)
    # location /webhook {
    #     proxy_pass http://127.0.0.1:4000;
    #     proxy_http_version 1.1;
    #     proxy_set_header Host $host;
    #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    #     proxy_set_header X-Real-IP $remote_addr;
    # }

    error_page 404 /;
}
```

---

### ğŸ§ª Kontrol AdÄ±mlarÄ±

1. Nginx yapÄ±landÄ±rma test:

   ```bash
   sudo nginx -t
   ```

2. Uygulama:

   ```bash
   sudo systemctl reload nginx
   ```

3. TarayÄ±cÄ±dan aÃ§:
   `https://koenigsmassage.com` â†’ Next.js frontend Ã§alÄ±ÅŸÄ±yor mu?
   `https://api.guezelwebdesign.com/api-docs` â†’ Swagger Ã¼zerinden backend aÃ§Ä±k mÄ±?

---

Ä°stersen bu yapÄ±landÄ±rmayÄ± `koenigsmassage.com.conf` olarak kaydetmek Ã¼zere md veya `.conf` dosyasÄ± formatÄ±nda da verebilirim. Devam edelim mi?
